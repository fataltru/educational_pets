# Автоматизация выполнения задач

## ETL - Ежедневное заполнение БД метриками по срезам

### Описание задачи и последовательность ее автоматизации

Из таблицы feed_actions для каждого юзера посчитать число просмотров и лайков контента. В message_actions для каждого юзера считаем, сколько он получает и отсылает сообщений, скольким людям он пишет, сколько людей пишут ему. Объединяем две таблицы в одну, и считаем выше указанные метрики в срезах пола, возраста и операционной системы. Полученные сразу записываем в одну таблицу в БД.

Задача выполняется ежесуточно в 11:00

### Используемые инструменты:

- airflow, pandas, pandahouse

## Автоматизация отправки отчетности о работе ленты в телеграм

### Описание задачи

Написать скрипт для сборки отчета по ленте новостей. Отчет будет состоять из двух частей:

1. текст с информацией о значениях ключевых метрик за предыдущий день
2. график с значениями метрик за предыдущие 7 дней

В отчет включим следующие метрики: DAU, Просмотры, Лайки, CTR

Задача выполняется ежесуточно в 11:00

[Пример готового отчета за 2023-10-19](https://github.com/fataltru/educational_pets/blob/main/pets/kc/03_airflow/%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B%20%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D1%8B%D1%85%20%D0%BE%D1%82%D1%87%D0%B5%D1%82%D0%BE%D0%B2/feed_daily_report.pdf)

### Используемые инструменты:

- airflow, pandas, pandahouse, matplotlib, seaborn, telegram

## Автоматизация отправки отчетности о работе приложения в телеграм

### Описание задачи

Написать скрипт для сборки отчета по приложению в целом (лента + чат). Отчет будет состоять из трех частей:

1. текст с информацией о значениях ключевых метрик за предыдущий день
2. 4 группы графиков
3. Накопительный .csv файл с информацией по всем метрикам в различных срезах

Задача выполняется ежесуточно в 11:00

[Пример готового отчета за 2023-10-20](https://github.com/fataltru/educational_pets/blob/main/pets/kc/03_airflow/%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B%20%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D1%8B%D1%85%20%D0%BE%D1%82%D1%87%D0%B5%D1%82%D0%BE%D0%B2/app_daily_report.pdf)

### Используемые инструменты:

- airflow, pandas, pandahouse, matplotlib, seaborn, telegram

## Автоматизация системы оповещения о недопустимом отклонении метрик

### Описание задачи

Написать скрипт для сборки информации об основных метриках (активность пользователей, лайки, просмотры, ctr, количество сообщений), который в случае обнаружения аномального значения, отправляется сообщение в чат с информацией: метрика, ее значение, величина отклонения.

Задача выполняется каждые 15 минут

[Пример оповещения](https://github.com/fataltru/educational_pets/blob/main/pets/kc/03_airflow/%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B%20%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D1%8B%D1%85%20%D0%BE%D1%82%D1%87%D0%B5%D1%82%D0%BE%D0%B2/alert_report.pdf)

### Используемые инструменты:

- airflow, pandas, pandahouse, matplotlib, seaborn, telegram, sklearn.neighbors

